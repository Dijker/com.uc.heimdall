{
	"id": "com.uc.heimdall",
	"sdk": 2,
	"permissions": [ "homey:manager:api", "homey:manager:speech-output" ],
	"name": { "en": "Heimdall"},
	"description": { "en": "This app turns homey into a simple surveillance system" },
	"category": [ "security", "tools" ],
	"images": { "large": "assets/images/large.png", "small": "assets/images/small.png" },
	"version": "2.0.10",
	"compatibility": ">=2.0",
	"brandColor": "#4BD762",
	"author": { "name": "Danee de Kruyff", "email": "daneedekruyff@outlook.com" },
	"contributors": {
		"developers": [{"name": "Danee de Kruyff","email": "daneedekruyff@outlook.com"}]
	},
	"contributing": {
		"donate": {
		  "paypal": {
			"username": "daneedekruyff"
		  }
		}
	  },
	"tags": {
		"en": [ "Home", "Alarm", "Alert", "Homeyalarm", "System", "Tools", "Log", "Surveillance" ],
		"nl": [ "Huis", "Alarm", "Homeyalarm", "Systeem", "Beveilig", "Beveiliging", "Toezicht" ],
		"de": [ "Heim", "Alarm", "Warnung", "Homeyalarm", "System", "Werkzeuge", "Log", "Überwachung" ]
	},
	"homeyCommunityTopicId": 134,
	"flow": {
		"triggers": [
		{
			"id": "SurveillanceChanged",
			"title": {
				"en": "Surveillance Mode changed.",
				"nl": "Toezicht modus is gewijzigd.",
				"de": "Überwachungsmodus geändert."
			},
			"tokens": [
				{
					"name": "mode",
					"type": "string",
					"title": {
						"en": "Surveillance Mode",
						"nl": "Toezicht Modus",
						"de": "Überwachungsmodus"
					},
					"example": "Disarmed"
				}
			]
		},
		{
			"id": "sensorActiveAtArming",
			"title": {
				"en": "Sensor active at arming.",
				"nl": "sensor actief bij inschakelen.",
				"de": "Sensor aktiv bei Einschaltung."
			},
			"tokens": [
				{
					"name": "warning",
					"type": "string",
					"title": {
						"en": "Warning",
						"nl": "Waarschuwing",
						"de": "Warnung"
					},
					"example": "Warning, sensor is active."
				}
			]
		},
		{
			"id": "sensorActiveAtSensorCheck",
			"title": {
				"en": "Sensor active at Status Check.",
				"nl": "Sensor actief bij status controle.",
				"de": "Sensor aktiv bei Status Überprufing."
			},
			"tokens": [
				{
					"name": "Device",
					"type": "string",
					"title": {
						"en": "Device",
						"nl": "Apparaat",
						"de": "Gerät"
					},
					"example": "Front door"
				},
				{
					"name": "Device type",
					"type": "string",
					"title": {
						"en": "Device type",
						"nl": "Apparaat type",
						"de": "Gerät"
					},
					"example": "Contact"
				},
				{
					"name": "Zone",
					"type": "string",
					"title": {
						"en": "Zone",
						"nl": "Zone",
						"de": "Zone"
					},
					"example": "Hallway"
				},
				{
					"name": "State",
					"type": "string",
					"title": {
						"en": "State",
						"nl": "Status",
						"de": "Status"
					},
					"example": "Open"
				}
			]
		},
		{
			"id": "AlarmActivated",
			"title": {
				"en": "The alarm is activated.",
				"nl": "Het alarm is geactiveerd.",
				"de": "Alarm ausgelöst"
			},
			"tokens": [
				{
					"name": "Reason",
					"type": "string",
					"title": {
						"en": "Reason",
						"nl": "Reden",
						"de": "Grund"
					},
					"example": "A door opened"
				},
				{
					"name": "Zone",
					"type": "string",
					"title": {
						"en": "Zone",
						"nl": "Zone",
						"de": "Zone"
					},
					"example": "Hallway"
				}
			]
		},
		{
			"id": "AlarmDeactivated",
			"title": {
				"en": "The alarm is deactivated.",
				"nl": "Het alarm is gedeactiveerd.",
				"de": "Alarm ist deaktiviert."
			},
			"tokens": [
				{
					"name": "Source",
					"type": "string",
					"title": {
						"en": "Source",
						"nl": "Bron",
						"de": "Quelle"
					},
					"example": "Alarm Off Button"
				}
			]
		},
		{
			"id": "AlarmDelayActivated",
			"title": {
				"en": "The alarm delay is activated.",
				"nl": "De alarm vertraging is geactiveerd.",
				"de": "Alarmverzögerung ist aktiviert."
			},
			"tokens": [
				{
					"name": "Reason",
					"type": "string",
					"title": {
						"en": "Reason",
						"nl": "Reden",
						"de": "Grund"
					},
					"example": "Door Sensor: Open"
				},
				{
					"name": "Duration",
					"type": "number",
					"title": {
						"en": "Duration",
						"nl": "Duur",
						"de": "Dauer"
					},
					"example": 30
				}
			]
		},
		{
			"id": "ArmDelayActivated",
			"title": {
				"en": "The arming delay is activated.",
				"nl": "De inschakel vertraging is geactiveerd.",
				"de": "Aktivierungcountdown ist aktiviert."
			},
			"tokens": [
				{
					"name": "Duration",
					"type": "number",
					"title": {
						"en": "Duration",
						"nl": "Duur",
						"de": "Dauer"
					},
					"example": 30
				}
			]
			
		},
		{
			"id": "TimeTillAlarm",
			"title":{
				"en": "The time untill alarm changed",
				"nl": "De tijd tot alarm wijzigt",
				"de": "Zeit bis zum Alarm geändert"
			},
			"tokens": [
				{
					"name": "AlarmTimer",
					"type": "number",
					"title": {
						"en": "Seconds untill alarm",
						"nl": "Seconden tot alarm",
						"de": "Sekunden"
					},
					"example": 30
				}
			]
		},
		{
			"id": "TimeTillArmed",
			"title":{
				"en": "The time untill armed changed",
				"nl": "De tijd tot geactiveerd wijzigt",
				"de": "Zeit bis Aktivierung geändert"
			},
			"tokens": [
				{
					"name": "ArmedTimer",
					"type": "number",
					"title": {
						"en": "Seconds untill armed",
						"nl": "Seconden tot armed",
						"de": "Sekunden bis Aktivierung"
					},
					"example": 30
				}
			]
		},
		{
			"id": "LogLineWritten",
			"title":{
				"en": "A logline was written",
				"nl": "Een logregel is geschreven",
				"de": "Eine Meldung wurde geschrieben"
			},
			"tokens": [
				{
					"name": "Device",
					"type": "string",
					"title": {
						"en": "Device",
						"nl": "Apparaat",
						"de": " Gerät"
					},
					"example": "Motion Sensor"
				},
				{
					"name": "State",
					"type": "string",
					"title": {
						"en": "State",
						"nl": "Status",
						"de": "Status"
					},
					"example": "Motion detected"
				}
			]
		},
		{
			"id": "SensorTrippedInAlarmstate",
			"title": {
				"en": "Sensor tripped in Alarmstate",
				"nl": "Sensor actief in Alarmstatus",
				"de": "Sensor ausgelöst in Alarmstatus"
			},
			"tokens": [
				{
					"name": "State",
					"type": "string",
					"title": {
						"en": "State",
						"nl": "Status",
						"de": "Status"
					},
					"example": "Motion detected"
				},
				{
					"name": "Device",
					"type": "string",
					"title": {
						"en": "Device",
						"nl": "Apparaat",
						"de": "Gerät"
					},
					"example": "Motion Sensor"
				},
				{
					"name": "Zone",
					"type": "string",
					"title": {
						"en": "Zone",
						"nl": "Zone",
						"de": "Zone"
					},
					"example": "Hallway"
				}
			]
		},
		{
			"id": "noInfoReceived",
			"title" :{
				"en": "No information received",
				"nl": "Geen informatie ontvangen",
				"de": "Keine Informationen empfangen"
			},
			"tokens": [
				{
					"name": "Duration",
					"type": "number",
					"title": {
						"en": "Hours no information",
						"nl": "Uren geen informatie",
						"de": "Stunden keine Informationen"
					},
					"example": 24
				},
				{
					"name": "LastUpdate",
					"type": "string",
					"title": {
						"en": "Last update",
						"nl": "Laatste bericht",
						"de": "Letztes Update"
					},
					"example": "2019-01-15 13:37:00"
				},
				{
					"name": "Device",
					"type": "string",
					"title": {
						"en": "Device",
						"nl": "Apparaat",
						"de": "Gerät"
					},
					"example": "Motion Sensor"
				},
				{
					"name": "Zone",
					"type": "string",
					"title": {
						"en": "Zone",
						"nl": "Zone",
						"de": "Zone"
					},
					"example": "Living Room"
				}
			]
		}
		],
		"conditions": [
			{
				"id": "SurveillanceIs",
				"title": {
					"en": "Surveillance mode is !{{ |not }}",
					"nl": "Toezicht mode is !{{ |niet }}",
					"de": "Überwachungsmodus ist !{{ |nicht }}"
				},
				"args": [
					{
					  	"name": "surveillance",
					  	"type": "dropdown",
					  	"values": [
							{
								"id": "armed",
								"label": {
									"en": "Armed",
									"nl": "Geactiveerd",
									"de": "Aktiviert"
								}
							},
						  	{
								"id": "disarmed",
								"label": {
									"en": "Disarmed",
									"nl": "Gedeactiveerd",
									"de": "Deaktiviert"
								}
						  	},
						  	{
								"id": "partially_armed",
								"label": {
									"en": "Partially Armed",
									"nl": "Deels geactiveerd",
									"de": "Teilweise aktiviert"
								}
						  	}
					  	]
					}
				]
			},
			{
				"id": "ArmingCountdown",
				"title": {
					"en": "Arming countdown !{{active |not active}}",
					"nl": "Inschakel vertraging !{{actief |niet actief}}",
					"de": "Aktivierungcountdown !{{aktiv |nicht aktiv}}"
				}
			},
			{
				"id": "AlarmCountdown",
				"title": {
					"en": "Alarm countdown !{{active |not active}}",
					"nl": "Alarm vertraging !{{actief |niet actief}}",
					"de": "Alarmcountdown !{{aktiv |nicht aktiv}}"
				}
			},
			{
				"id": "AlarmActive",
				"title": {
					"en": "Alarm state is !{{active |not active}}",
					"nl": "Alarm status is !{{actief |niet actief}}",
					"de": "Alarmstatus !{{aktiv |nicht aktiv}}"
				}
			}
		],
		"actions": [
		{
			"id": "SetSurveillance",
			"title": {
				"en": "Set Surveillance Mode",
				"nl": "Stel Toezicht Modus in",
				"de": "Überwachungsmodus stellen"
			},
			"args": [
				{
					  "name": "surveillance",
					  "type": "dropdown",
					  "values": [
						{
							"id": "armed",
							"label": {
								"en": "Armed",
								"nl": "Geactiveerd",
								"de": "Aktiviert"
							}
						},
						  {
							"id": "disarmed",
							"label": {
								"en": "Disarmed",
								"nl": "Gedeactiveerd",
								"de": "Deaktiviert"
							}
						  },
						  {
							"id": "partially_armed",
							"label": {
								"en": "Partially Armed",
								"nl": "Deels geactiveerd",
								"de": "Teilweise aktiviert"
							}
						  }
					  ]
				},
				{
					"name": "device",
					"type": "device",
					"filter": "driver_id=surveillanceModeSwitch"
				}
			]
		},
		{
			"id": "SendInfo",
			"title": {
				"en": "Send information to Heimdall",
				"nl": "Stuur informatie naar Heimdall",
				"de": "Sende Informationen an Heimdall"
			},
			"args": [{
				"name": "log",
				"type": "text"
			}]
		},
		{
			"id": "ClearHistory",
			"title": {
				"en": "Clear Heimdall history",
				"nl": "Verwijder Heimdall geschiedenis",
				"de": "Lösche alle Heimdall Ereignisse"
			}
		},
		{
			"id": "ActivateAlarm",
			"title": {
				"en": "Activate Alarm",
				"nl": "Activeer Alarm",
				"de": "Aktiviere Alarm"
			}
		},
		{
			"id": "DeactivateAlarm",
			"title": {
				"en": "Deactivate Alarm",
				"nl": "Deactiveer Alarm",
				"de": "Deaktiviere Alarm"
			}
		},
		{
			"id": "CheckLastCommunication",
			"title": {
				"en": "Check Last Communication",
				"nl": "Controleer laatste communicatie",
				"de": "Kontrolliere letzte Kommunikation"
			}
		},
		{
			"id": "DevicesStateCheck",
			"title": {
				"en": "Check status of all sensors",
				"nl": "Controleer de status van alle sensoren",
				"de": "Überprüfe Status aller Sensoren"
			}
		},
		{
			"id": "SendNotification",
			"title": {
				"en": "Send information to Timeline",
				"nl": "Stuur informatie naar Timeline",
				"de": "Sende Informationen an Timeline"
			},
			"args": [{
				"name": "message",
				"type": "text"
			}]
		}
		]
	},
	"capabilities": {
		"homealarm_state": {
			"type": "enum",
			"title": {
			  "en": "Home Alarm state",
			  "nl": "Thuisalarm status",
			  "de": "Heim Alarm Status"
			},
			"values": [
			  {
				"id": "armed",
				"title": {
				  "en": "Armed",
				  "nl": "Geactiveerd",
				  "de": "Gesichert"
				}
			  },
			  {
				"id": "disarmed",
				"title": {
				  "en": "Disarmed",
				  "nl": "Gedeactiveerd",
				  "de": "Entsichert"
				}
			  },
			  {
				"id": "partially_armed",
				"title": {
				  "en": "Partially armed",
				  "nl": "Deels geactiveerd",
				  "de": "Teils gesichert"
				}
			  }
			],
			"getable": true,
			"setable": true,
			"uiComponent": "picker"
		},
		"alarm_heimdall": {
            "type": "boolean",
            "title": {
				"en": "state",
				"nl": "status",
				"de": "status"
			},
			"desc": "The Alarm status",
            "getable": true,
			"setable": true,
			"uiComponent": "sensor",
			"icon": "drivers/alarmOffSwitch/assets/alarm.svg"
		}
	},
	"drivers": [
		{
			"id": "surveillanceModeSwitch",
			"name": {
				"en": "Mode",
				"nl": "Modus",
				"de": "Modus"
				},
			"images": {
				"large": "drivers/surveillanceModeSwitch/assets/images/large.png",
				"small": "drivers/surveillanceModeSwitch/assets/images/small.png"
			},
			"class": "other",
			"capabilities": [ "homealarm_state", "alarm_heimdall" ],
			"capabilitiesOptions":  {
				"homealarm_state": {
					"desc": "The Surveillance Mode",
					"preventTag": true
				},
				"alarm_heimdall": {
					"preventTag": true,
					"titleTrue": {
						"en": "ALARM",
						"nl": "ALARM",
						"de": "ALARM"
					},
					"titleFalse": {
						"en": "All is quiet",
						"nl": "Alles ok",
						"de": "Alles ok"
					}
				}
			},
			"pair": [
				{
					"id": "list_triggers",
					"template": "list_devices",
					"navigation": {
						"next": "add_triggers"
					}
				},
				{
					"id": "add_triggers",
					"template": "add_devices"
				}
			]
		},
		{
			"id": "alarmOffSwitch",
			"name": {
				"en": "Alarm",
				"nl": "Alarm",
				"de": "Alarm"
			},
			"images": {
				"large": "drivers/alarmOffSwitch/assets/images/large.png",
				"small": "drivers/alarmOffSwitch/assets/images/small.png"
			},
			"class": "button",
			"capabilities": [ "button", "alarm_heimdall" ],
			"capabilitiesOptions":  {
				"button": {
					"title":{
						"en": "Turn off",
						"nl": "Schakel uit",
						"de": "Ausschalten"
					},
					"desc": "Button to turn Alarm off",
					"preventTag": true
				},
				"alarm_heimdall": {
					"preventTag": true,
					"preventInsights": true,
					"titleTrue": {
						"en": "ALARM",
						"nl": "ALARM",
						"de": "ALARM"
					},
					"titleFalse": {
						"en": "All is quiet",
						"nl": "Alles ok",
						"de": "Alles ok"
					}
				}
			},
			"pair": [
				{
					"id": "list_triggers",
					"template": "list_devices",
					"navigation": {
						"next": "add_triggers"
					}
				},
				{
					"id": "add_triggers",
					"template": "add_devices"
				}
			]
		}
	]
}
